<div class="titlebar">
  <span class="title">Customers</span>
  <div>
    <mat-form-field
      class="search"
      appearance="outline"
      (input)="searchCustomer(userSearch.value)"
    >
      <mat-label>Search</mat-label>
      <input class="" matInput placeholder="Search" #userSearch />
      <button
        *ngIf="userSearch.value"
        (click)="userSearch.value = ''; resetCustomerList()"
        matSuffix
        mat-icon-button
        aria-label="Clear"
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>
</div>

<mat-card class="m-4 h-75">
  <div *ngIf="nodata" class="noDataBanner">
    <h4>No Data Found</h4>
  </div>
  <table
    *ngIf="!nodata"
    mat-table
    [dataSource]="viewCustomerList"
    class="mat-elevation-z8 customerData"
  >
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let customer">{{ customer.name }}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email</th>
      <td mat-cell *matCellDef="let customer">{{ customer.email }}</td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th mat-header-cell *matHeaderCellDef>Phone</th>
      <td mat-cell *matCellDef="let customer">{{ customer.mobile }}</td>
    </ng-container>

    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef>Date</th>
      <td mat-cell *matCellDef="let customer">
        {{ customer.created_at | date : "dd/MM/yyyy" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="totalOrders">
      <th mat-header-cell *matHeaderCellDef>Total Orders</th>
      <td mat-cell *matCellDef="let customer">56</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let customer; columns: displayedColumns"
      (click)="customerDataPopup(customer)"
    ></tr>
  </table>
  <app-paginator class="paginator" [length]="dataLength" [pageSize]="pageSize" (pageChange)="pageChange($event)"></app-paginator>
</mat-card>
